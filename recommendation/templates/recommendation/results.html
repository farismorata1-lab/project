<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« â€“ Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙˆØµÙŠØ© Ø§Ù„Ø³ÙŠØ§Ø­ÙŠ</title>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            margin: 0;
            font-family: "Cairo", sans-serif;
            background: url("https://images.unsplash.com/photo-1507525428034-b723cf961d3e") no-repeat center center/cover;
            min-height: 100vh;
        }

        /* ØºØ·Ø§Ø¡ Ø²Ø¬Ø§Ø¬ÙŠ ÙÙˆÙ‚ Ø§Ù„Ø®Ù„ÙÙŠØ© */
        .glass-layer {
            background: rgba(255, 255, 255, 0.60);
            backdrop-filter: blur(8px);
            min-height: 100vh;
            padding: 40px 0;
        }

        .container {
            width: 92%;
            max-width: 1200px;
            margin: auto;
        }

        h1 {
            text-align: center;
            color: #002855;
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 35px;
        }

        /* ======= Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© ======= */
        .result-card {
            display: flex;
            gap: 20px;
            background: #ffffffee;
            border-radius: 18px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 28px;
            padding: 18px;
            transition: transform .25s ease, box-shadow .25s ease;
        }

        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 22px rgba(0,0,0,0.15);
        }

        .result-image {
            width: 280px;
            height: 200px;
            border-radius: 14px;
            object-fit: cover;
        }

        .info {
            flex: 1;
        }

        .info h2 {
            margin: 0 0 10px 0;
            font-size: 25px;
            font-weight: 700;
            color: #00509d;
        }

        .info-line {
            margin: 6px 0;
            font-size: 16px;
            color: #333;
        }

        .desc {
            margin-top: 10px;
            line-height: 1.7;
            color: #444;
        }

        .weather-box {
            margin-top: 12px;
            background: #e8f3ff;
            padding: 10px;
            border-radius: 10px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            font-size: 15px;
            font-weight: 600;
            color: #003566;
        }

        .score {
            margin-top: 12px;
            display: inline-block;
            padding: 7px 14px;
            background: #002855;
            color: white;
            border-radius: 8px;
            font-size: 14px;
        }

        .fav-btn {
            background: #ff3b3b;
            padding: 9px 14px;
            border-radius: 10px;
            color: white;
            border: none;
            margin-top: 12px;
            cursor: pointer;
            font-size: 15px;
            transition: .2s ease;
        }

        .fav-btn:hover {
            transform: scale(1.05);
            background: #d62828;
        }

        .fav-alert {
            background: #fff3cd;
            color: #856404;
            padding: 10px 12px;
            border-radius: 10px;
            display: inline-block;
            margin-top: 12px;
            font-size: 14px;
        }

        /* Ø²Ø± Ø±Ø¬ÙˆØ¹ */
        .back-btn {
            display: block;
            width: 240px;
            margin: 40px auto 0;
            padding: 14px;
            text-align: center;
            background: #023e8a;
            color: white;
            border-radius: 12px;
            font-size: 18px;
            text-decoration: none;
            transition: 0.2s ease;
        }

        .back-btn:hover {
            background: #001d73;
        }

        .message {
            background: #ffdddd;
            padding: 15px;
            border-radius: 10px;
            color: #b30000;
            text-align: center;
            font-size: 17px;
            margin-bottom: 20px;
        }

    </style>
</head>

<body>

<div class="glass-layer">
    <div class="container">

        <h1>ğŸ” Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø«</h1>

        {% if message %}
        <div class="message">{{ message }}</div>
        {% endif %}

        {% if results %}
            {% for r in results %}
                <div class="result-card">

                    <img src="{{ r.image_url }}" class="result-image">

                    <div class="info">

                        <h2>{{ r.name }}</h2>

                        <div class="info-line">ğŸŒ <strong>Ø§Ù„Ø¯ÙˆÙ„Ø©:</strong> {{ r.country }}</div>
                        <div class="info-line">ğŸ™ï¸ <strong>Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©:</strong> {{ r.city }}</div>
                        <div class="info-line">ğŸ·ï¸ <strong>Ø§Ù„ØªØµÙ†ÙŠÙ:</strong> {{ r.category }}</div>
                        <div class="info-line">â­ <strong>Ø§Ù„ØªÙ‚ÙŠÙŠÙ…:</strong> {{ r.rating }}</div>

                        <div class="desc"><strong>Ø§Ù„ÙˆØµÙ:</strong> {{ r.description }}</div>

                        {% if r.weather %}
                        <div class="weather-box">
                            <img src="https://openweathermap.org/img/wn/{{ r.weather.icon }}.png" width="45">
                            ğŸŒ¡ {{ r.weather.temperature }}Â°C â€” {{ r.weather.description }}
                        </div>
                        {% endif %}

                        <div class="score">Ù†Ø³Ø¨Ø© Ø§Ù„ØªØ´Ø§Ø¨Ù‡: {{ r.score|floatformat:2 }}</div>

                        {% if user.is_authenticated %}
                        <form action="{% url 'add_favorite' r.name %}" method="POST">
                            {% csrf_token %}
                            <button class="fav-btn">â¤ï¸ Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙØ¶Ù„Ø©</button>
                        </form>
                        {% else %}
                        <div class="fav-alert">
                            ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙØ¶Ù„Ø© â­
                        </div>
                        {% endif %}

                    </div>
                </div>
            {% endfor %}
        {% endif %}

        <a href="/" class="back-btn">ğŸ  Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>

    </div>
</div>

</body>
</html>
